<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>RMF Systems Engineering Handbook</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">RMF Systems Engineering Handbook</a></li><li class="chapter-item expanded "><a href="headers/project-outline.html"><strong aria-hidden="true">1.</strong> Project Outline</a></li><li class="chapter-item expanded "><a href="headers/design-efforts.html"><strong aria-hidden="true">2.</strong> Design Efforts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/roles-responsibilities.html"><strong aria-hidden="true">2.1.</strong> Identified Roles & Responsibilities</a></li></ol></li><li class="chapter-item expanded "><a href="headers/approach-development.html"><strong aria-hidden="true">3.</strong> Approach to Development</a></li><li class="chapter-item expanded "><a href="headers/identified-hazards.html"><strong aria-hidden="true">4.</strong> Risk Assessment & Identified Hazards</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/terms-of-references.html"><strong aria-hidden="true">4.1.</strong> Terms of Reference</a></li></ol></li><li class="chapter-item expanded "><a href="headers/risk-assessment.html"><strong aria-hidden="true">5.</strong> Approach to Functional Safety</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/platform-standards.html"><strong aria-hidden="true">5.1.</strong> Platform & Operational Safety Standards</a></li><li class="chapter-item expanded "><a href="content/amr-standards.html"><strong aria-hidden="true">5.2.</strong> AMR Design and Safety Considerations</a></li></ol></li><li class="chapter-item expanded "><a href="headers/software-systems-safety.html"><strong aria-hidden="true">6.</strong> Approach to Software Systems Safety</a></li><li class="chapter-item expanded "><a href="headers/software-qa.html"><strong aria-hidden="true">7.</strong> Approach to Software Quality Assurance</a></li><li class="chapter-item expanded "><a href="headers/verification-validation.html"><strong aria-hidden="true">8.</strong> Approach to Verification and Validation - RMF Scheduler (OSRF)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/basic-tests.html"><strong aria-hidden="true">8.1.</strong> Basic Tests</a></li><li class="chapter-item expanded "><a href="content/standalone-tests.html"><strong aria-hidden="true">8.2.</strong> Standalone Tests</a></li></ol></li><li class="chapter-item expanded "><a href="headers/systems-test-plan.html"><strong aria-hidden="true">9.</strong> Systems Test Plan (HopeTechnik)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/baseline-0.html"><strong aria-hidden="true">9.1.</strong> Standalone Test - Static Lift Rig Test (sensorbot)</a></li><li class="chapter-item expanded "><a href="content/baseline-1.html"><strong aria-hidden="true">9.2.</strong> Standalone Test - Lifts and Doors</a></li><li class="chapter-item expanded "><a href="content/baseline-2.html"><strong aria-hidden="true">9.3.</strong> Integration Tests</a></li><li class="chapter-item expanded "><a href="content/baseline-final.html"><strong aria-hidden="true">9.4.</strong> Final Tests</a></li></ol></li><li class="chapter-item expanded "><a href="headers/annex.html"><strong aria-hidden="true">10.</strong> Annex</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/design-docs.html"><strong aria-hidden="true">10.1.</strong> Design Documents (OSRF)</a></li><li class="chapter-item expanded "><a href="content/amr-building.html"><strong aria-hidden="true">10.2.</strong> AMR To Building Interaction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/amr.html"><strong aria-hidden="true">10.2.1.</strong> AMR Integration (Senserbot)</a></li><li class="chapter-item expanded "><a href="content/lift-door-integration.html"><strong aria-hidden="true">10.2.2.</strong> Lift and Doors Integration (HopeTechnik)</a></li><li class="chapter-item expanded "><a href="content/mapping.html"><strong aria-hidden="true">10.2.3.</strong> Mapping & Traffic Editor Concerns (Senserbot)</a></li></ol></li><li class="chapter-item expanded "><a href="content/emergency-behaviors.html"><strong aria-hidden="true">10.3.</strong> Emergency Requirements & Behaviours (Senserbot)</a></li><li class="chapter-item expanded "><a href="content/sis.html"><strong aria-hidden="true">10.4.</strong> Safety Instrumented System</a></li><li class="chapter-item expanded "><a href="content/wireless-charger.html"><strong aria-hidden="true">10.5.</strong> Universal Wireless Charging (Senserbot)</a></li><li class="chapter-item expanded "><a href="content/wiring-diagram.html"><strong aria-hidden="true">10.6.</strong> ICD of ethernet wiring at TRL</a></li><li class="chapter-item expanded "><a href="content/parasoft-setup.html"><strong aria-hidden="true">10.7.</strong> Parasoft setup of RMF</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/parasoft-outputs.html"><strong aria-hidden="true">10.7.1.</strong> Parasoft Outputs of RMF Modules</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="headers/faq.html"><strong aria-hidden="true">11.</strong> Frequently Asked Questions</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">RMF Systems Engineering Handbook</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="rmf-systems-engineering-handbook"><a class="header" href="#rmf-systems-engineering-handbook">RMF Systems Engineering Handbook</a></h1>
<p>1st July 2022</p>
<h2 id="what-is-the-rmftrl-project-about"><a class="header" href="#what-is-the-rmftrl-project-about">What is the RMF@TRL project about?</a></h2>
<p>In the course of building the <a href="https://osrf.github.io/ros2multirobotbook/intro.html">RMF</a>, the team observed many questions being asked 
(by Government agencies, end users, AMR vendors and developers), about RMF's </p>
<ul>
<li>Safety &amp; reliability</li>
<li>Operational concerns </li>
<li>Policy and regulations.</li>
</ul>
<p>To address these concerns, Singapore's <a href="https://www.sgdi.gov.sg/ministries/pmo/departments/stppo">S&amp;TPPO</a> and <a href="https://www.smartnation.gov.sg/about-smart-nation/sndgg">SNDGG</a>
have put together a pilot project centered on <a href="https://www.nlb.gov.sg/">National Library Board's</a> premises at 
<a href="https://www.nlb.gov.sg/VisitUs/BranchDetails/tabid/140/bid/335/Default.aspx?branch=Tampines+Regional+Library">Tampines Regional</a></p>
<p>The project team (in collaboration with OSRF Singapore) will be taking a <em>test centric</em> approach in our development &amp; deployment of RMF at TRL, to collect real world data to evaluate these issues.</p>
<h2 id="motivations-for-rmf-systems-engineering-handbook"><a class="header" href="#motivations-for-rmf-systems-engineering-handbook">Motivations for RMF Systems Engineering Handbook</a></h2>
<p>At higher levels of consideration (from a systems engineering standpoint), we note the following trends for ROS usage:</p>
<ul>
<li>ROS1 has been massively successful as an open source effort amongst the academic community
<ul>
<li>Promoting reuse of robotics developments across students, researchers and developers</li>
<li>High rates of adoption across robotics community, particularly in promoting the ROS standard message libraries for interoperability</li>
</ul>
</li>
<li>ROS2 has been steadily gaining traction with automotive components suppliers ie: <a href="https://www.apex.ai/">Apex.AI</a>
<ul>
<li>Noted ROS1 has reached end of life (noetic)</li>
<li>ROS2 is supposed to champion <em>both</em> open source efforts <em>and</em> commercially ready packages (ie: ROS2 RMWs)</li>
</ul>
</li>
</ul>
<p>Key outcome we want to arrive at, is a <em>operational</em> (safe, functional and reliable) RMF system. 
Thus to bridge the divide from ROS1/ROS2 towards an operational outcome, is not just &quot;software&quot; issues.</p>
<p>There are orthogonal considerations, (ie: systems engineering concerns), that need to be addressed:</p>
<ul>
<li>Risk assessments and hazards analysis</li>
<li>Quality assurance &amp; quality control issues (ie: Patform hardware and software, operational safety)</li>
<li>Platform safety and operational standards</li>
<li>Design documentations and traceability</li>
<li>Qualifications plans and system test/comissioning plans</li>
</ul>
<p>We note also, that where previously AMRs were installed and comissioned &quot;end to end&quot; by a single Robotics Systems Integrator, 
RMF is designed to decouple the &quot;end to end&quot; responsibility, into the following roles:</p>
<ul>
<li>Building management systems </li>
<li>Core logic (govening traffic control)</li>
<li>AMR fleets ( &gt; 1 brand)</li>
</ul>
<p>This allows for multi-fleet interoperability</p>
<blockquote>
<p>&quot;The camel, was a horse, but designed by a committee...&quot; <br> - Sir Alec Issigonis, designer of the Morris Mini, 1959</p>
</blockquote>
<p>So it turns out, these are rather contentious issues, where answers are needed.
After several months of study, the project team has outlined an approach that we think strikes the best balance of the following factors:</p>
<ul>
<li>Cost</li>
<li>Complexity</li>
<li>Performance</li>
<li>Interoperability</li>
</ul>
<blockquote>
<p>Insert diagram of &quot;Platform -&gt; Qualifications -&gt; Operations&quot; here</p>
</blockquote>
<p>For this to work however, we will be sharing both our approach (in this guide book) and the data that we have collected, for peer review process. Thus we need the </p>
<p>Do email us your questions and observations, that we can refine this <em>live</em> systems engineering process, so that we can create a new kind of cyber-physical network where
robots can roam freely across interlinked premises!</p>
<p>Thanks and best regards,<br />
<br> <br> <br> <br> <br> <br></p>
<p>Chong Teng Sheng<br />
Project Sponsor, S&amp;TPPO<br />
<a href="mailto:chong_teng_sheng@pmo.gov.sg">chong_teng_sheng@pmo.gov.sg</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="project-outline"><a class="header" href="#project-outline">Project Outline</a></h1>
<p><img src="headers/../images/objectives.png" alt="Project Outline" /></p>
<h2 id="requirements"><a class="header" href="#requirements">Requirements</a></h2>
<p>The requirements were gathered first through user interviews with the NLB staff as well as discussions with S&amp;TPPO. The team has distilled the requirements into the below points:</p>
<ol>
<li>The system should be able to autonomously run with no active human monitoring.</li>
<li>The system should be able to autonomously run with minimal human intervention for fault handling.</li>
<li>The system should share infrastructure across different vendors to reduce duplication and resource consumption.</li>
<li>The system should be proven to be robust and reliable. GovTech established that this is 95% success rate of tasks issued.</li>
<li>The system should be modular, and highly scalable.</li>
<li>The system should be safe.</li>
</ol>
<p>It is noted that cybersecurity was not a primary consideration. This can be attributed to the fact that in the event of system failure due to malicious efforts, the impact to the NLB agency was minimal, as bookshelf scanning and cleaning did not immediately affect the agency's ability to provide the service to citizens. Thus, granting GovTech time to respond to such incidences and reinstate the system. Furthermore, as there was no sensitive data stored within the system, and the system is a backend system that is transparent to the citizens, the impact to the agency or nation was trivial.</p>
<h2 id="test-centric-approach"><a class="header" href="#test-centric-approach">Test Centric Approach</a></h2>
<p>Based on the requirements, the test plan was derived to prove that the system has met these requirements:</p>
<ol>
<li>Single Robot using automated door and lift to perform task on a different level with no human intervention. (Requirements #1,2,3,4).</li>
<li>Single Robot using common charging points. (Requirements #3).</li>
<li>Single Robot parking in designated safety spots during fire alarm. (#Requirements #6).</li>
<li>Two Robots from different brands able to deconflict lift and door use to perform respective tasks. (Requirements #1,2,3,4).</li>
</ol>
<p>With regards to Requirement #5, that is a design choice that GovTech and its vendors will adopt when implementing a system. There is no one way to test whether we have achieved this but through future deployments, in terms of review of effort from the scale-up team. However, one way to track this metric quantitatively could be through the cost associated with the next deplyoment of RMF within a NLB premise. Preliminary costing for Punggol Regional Library RMF Deployment is at about $100,000, which is approximately 90% cost reduction of the initial deployment at TRL.</p>
<h2 id="readiness-assessment"><a class="header" href="#readiness-assessment">Readiness Assessment</a></h2>
<p>These tests were then performed and is detailed within the test section. The UAT and the randomized testing helped determine how ready the system is for deployment, surface bugs for remediation and determine the ConOps for NLB.</p>
<h1 id="overall-architecture"><a class="header" href="#overall-architecture">Overall Architecture</a></h1>
<p><img src="headers/../images/archi.png" alt="Overall Achitecture" /></p>
<h1 id="our-partners-and-contributors"><a class="header" href="#our-partners-and-contributors">Our partners and contributors</a></h1>
<!DOCTYPE html>
<html>
<head>
<style>
* {
  box-sizing: border-box;
}
.row{
    overflow: scroll;
    white-space:nowrap;
    display: flex;
    justify-content:center;
}
<p>.column{
float: left;
width: 33.33%;
padding: 5px;
}</p>
</style>
</head>
<body>
<!--- ![SNDGG](../images/smart-nation-logo.png)-->
<!--- <img src="headers/../images/smart-nation-logo.png" width="200"/>-->
<!--- ![GovTech Logo](../images/snt.jpeg)-->
<!--- ![IMDA Logo](../images/imda_logo.jpg)-->
<div class="row">
  <div class="column">
    <img src="headers/../images/SNDGO.jpg" alt="Smart Nation Singapore" height="300" width="400" class="column">
  </div>
  <div class="column">
    <img src="headers/../images/snt.jpeg" alt="GovTech" height="300" width="400" class="column">
  </div>
  <div class="column">
    <img src="headers/../images/imda_logo.jpg" alt="IMDA" height="300" width="400" class="column">
  </div>
</div>
<p><br> <br></p>
<h2 id="project-sponsor"><a class="header" href="#project-sponsor">Project Sponsor</a></h2>
<p>Mr Chong Teng Sheng  - S&amp;TPPO<br />
Project Sponsor<br />
<a href="mailto:headers/chong_teng_sheng@pmo.gov.sg">chong_teng_sheng@pmo.gov.sg</a></p>
<h2 id="project-collaborators"><a class="header" href="#project-collaborators">Project Collaborators</a></h2>
<p>Mr Abilash Sivalingam<br />
<a href="mailto:headers/abilash_sivalingam@tech.gov.sg">abilash_sivalingam@tech.gov.sg</a></p>
<p>Mr Selvavignesh Balasubramanian<br />
<a href="mailto:headers/balasubramanian_selvavignesh@tech.gov.sg">balasubramanian_selvavignesh@tech.gov.sg</a> </p>
<h2 id="rmf-overall-systems-integrator--building-management-systems-integrator"><a class="header" href="#rmf-overall-systems-integrator--building-management-systems-integrator">RMF Overall Systems Integrator &amp; Building Management Systems Integrator</a></h2>
<p>Mr Lim Joo Siang - PM, Hope Technik<br />
Overall Systems Integrator Lead &amp; RMF Building Management Systems<br />
<a href="mailto:headers/limjoosiang@hopetechnik.com">limjoosiang@hopetechnik.com</a></p>
<h2 id="rmf-core--fleet-systems-integrator"><a class="header" href="#rmf-core--fleet-systems-integrator">RMF Core &amp; Fleet Systems Integrator</a></h2>
<p>Dr Ho Chin Keong - CTO, Senserbot<br />
RMF Core Integrator Lead<br />
<a href="mailto:headers/ChinKeong@senserbot.com">ChinKeong@senserbot.com</a></p>
<p><br> <br> 
Mr Matt Festo - PM, OSRF Singapore<br />
<a href="mailto:headers/matthew@openrobotics.org">matthew@openrobotics.org</a></p>
<p><br> <br>
Dr Michael Grey - Lead Developer, OSRF Singapore<br />
RMF Scheduler Development Lead<br />
<a href="mailto:headers/grey@openrobotics.org">grey@openrobotics.org</a></p>
<h2 id="universal-wireless-charger-systems-integrator"><a class="header" href="#universal-wireless-charger-systems-integrator">Universal Wireless Charger Systems Integrator</a></h2>
<p>Mr Terrenlzze Wong - Xnergy Wireless
Wireless Charger Lead<br />
<a href="mailto:headers/twongms@xnergytech.com">twongms@xnergytech.com</a></p>
</body>
</html>			
<div style="break-before: page; page-break-before: always;"></div><h1 id="design-efforts"><a class="header" href="#design-efforts">Design Efforts</a></h1>
<h2 id="design-efforts--document-tree"><a class="header" href="#design-efforts--document-tree">Design Efforts / Document tree</a></h2>
<ul>
<li>RMF BMS Systems Integrator (HT)
<ul>
<li>Lift acceptance test plan - from OEM</li>
<li>Lift PLC + lift acceptance test plan (include fire safety, PLC-UPS design), ICD</li>
<li>Lift PLC to Edge Computer test plan and IRS</li>
<li>Door PLC + Door acceptance test plan (include fire safety, PLC-UPS design)</li>
<li>Door PLC to Edge Computer test plan and IRS</li>
<li>Wireless Charger standardized docking test plan and IRS</li>
</ul>
</li>
<li>Overall RMF integrator (HT + Govtech)
<ul>
<li>Hazards and Risk analysis document, Risk Management Plan
<ul>
<li>Platform Safety</li>
<li>Operational Safety (ie: Fire safety)</li>
</ul>
</li>
<li>Building Wiring ICD</li>
<li>Network HDD and ICD</li>
<li>Overall SSS, Systems design document</li>
<li>Nominal case test plan (AMR vendors, basic 4 scenarios)</li>
<li>Extended test plan (4 scenarios + emergency scenarios, Monte Carlo testing)</li>
<li>Testing and commissioning plan
<ul>
<li>With ROS-Gazebo software in the loop (SwIL), SwTP for verification and validation</li>
<li>On Site Acceptance Test (OSAT)</li>
</ul>
</li>
</ul>
</li>
<li>RMF Core integrator (OSRC + Senserbot)
-RMF core cloud deployment SSS, Systems Design Document
<ul>
<li>RMF to BMS “cloud to cloud” test plan and IRS</li>
<li>Cybersecurity Risk Assessment (IM8, AIAS) &amp; development plan</li>
<li>Software Quality (ie: Parasoft C++) where applicable</li>
</ul>
</li>
<li>Aurora-Caato developer (Senserbot + I2R + Govtech)
<ul>
<li>RMF Nominal + I2R integration requirements</li>
</ul>
</li>
<li>AMR Vendors (Lionsbot? Gaussian..?)
<ul>
<li>RMF Nominal case integration requirements (to be discussed)</li>
</ul>
</li>
</ul>
<!--- ![termin](../images/termin.png)-->
<p align="center">
    <img width="400" height="300" src="headers/../images/termin.png">
</p>
<h2 id="design-efforts--documentation-goals"><a class="header" href="#design-efforts--documentation-goals">Design Efforts / Documentation Goals:</a></h2>
<ul>
<li>Identify updated type &quot;C&quot; requirements (ie: complimentary to ISO-
13482 as an operational standard) covering indoor buildings and
RMF-like system
<ul>
<li>*Complimentary to I2R efforts to update ISO/TC299, ISO/CD 18646-2</li>
</ul>
</li>
</ul>
<!--- ![SS ISO 13482:2017](../images/iso.png)-->
<p align="center">
    <img width="400" height="60" src="headers/../images/iso.png">
</p>
<ul>
<li>Update to IMDA AMR guidelines (ie: Govt Playbook)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="roles--responsibilities"><a class="header" href="#roles--responsibilities">Roles &amp; Responsibilities</a></h1>
<p><img src="content/../images/roles.png" alt="Roles &amp; Responsibilities" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="approach-to-development"><a class="header" href="#approach-to-development">Approach to Development</a></h1>
<h2 id="mandatory-developments"><a class="header" href="#mandatory-developments">Mandatory Developments</a></h2>
<h2 id="optional-developments"><a class="header" href="#optional-developments">Optional Developments</a></h2>
<h2 id="rationale"><a class="header" href="#rationale">Rationale</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="identified-hazards"><a class="header" href="#identified-hazards">Identified Hazards</a></h1>
<p><img src="headers/../images/table.png" alt="Identified Hazards" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="terms-of-reference"><a class="header" href="#terms-of-reference">Terms of Reference</a></h1>
<ul>
<li>A <strong>disturbance/error</strong> is an unknown and uncontrolled input acting on a system.</li>
<li>A <strong>fault</strong> is an unpermitted deviation of at least one characteristic property or parameter of the system from
the acceptable/usual/standard operating conditions.</li>
<li>A <strong>failure</strong> is a permanent
interruption of a system’s ability to perform a required function
under specified operating conditions.</li>
<li>Traditional control systems
are designed to return the system to normal operations in the
presence of disturbances but not in the presence of faults or failures.</li>
<li><strong>Fault-tolerant control</strong> (FTC) systems refer to control systems
that have been designed to explicitly account for some class of
specified faults in the closed-loop system. FTC systems must act
in the time between a fault and a system failure.</li>
</ul>
<h3 id="the-nature-of-accidents"><a class="header" href="#the-nature-of-accidents">The Nature of Accidents</a></h3>
<p><img src="content/../images/nature.png" alt="The Nature of Accidents" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="risk-assessment"><a class="header" href="#risk-assessment">Risk Assessment</a></h1>
<h2 id="many-forms-of-functional-safety-iec-61508"><a class="header" href="#many-forms-of-functional-safety-iec-61508">Many forms of Functional Safety (IEC 61508)</a></h2>
<p><img src="headers/../images/arrow.png" alt="Many forms of Functional Safety (IEC 61508)" /></p>
<h2 id="approach-to-risk-assessment--hazards-analysis"><a class="header" href="#approach-to-risk-assessment--hazards-analysis">Approach to Risk Assessment &amp; Hazards Analysis</a></h2>
<ul>
<li>Classifications (Mix of IEC 62304 and IEC 61508 SIL definitions):
<ul>
<li>Class A: No injury or damage to health is possible.</li>
<li>Class B: Injury is possible, but not serious.</li>
<li>Class C: Death or serious injury is possible.</li>
</ul>
</li>
</ul>
<p><img src="headers/../images/approach.png" alt="Approach to Risk Assessment &amp; Hazards Analysis" /></p>
<h2 id="approach-to-software-systems-safety-iso-62304"><a class="header" href="#approach-to-software-systems-safety-iso-62304">Approach to Software Systems Safety (ISO 62304)</a></h2>
<p><img src="headers/../images/approach_soft.png" alt="Approach to Software Systems Safety (ISO 62304)" /></p>
<h1 id="difference-in-class"><a class="header" href="#difference-in-class">Difference in Class</a></h1>
<h3 id="class-b"><a class="header" href="#class-b">Class B</a></h3>
<p><img src="headers/../images/classb.png" alt="Class B" /></p>
<h3 id="vs-class-c-lvl-a-sil-4"><a class="header" href="#vs-class-c-lvl-a-sil-4">VS Class C/ Lvl A/ SIL 4</a></h3>
<p><img src="headers/../images/classc.png" alt="Class C/ Lvl A/ SIL 4" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="platform-standards"><a class="header" href="#platform-standards">Platform standards</a></h1>
<h2 id="overview-of-platform-standards"><a class="header" href="#overview-of-platform-standards">Overview of platform standards</a></h2>
<p><img src="content/../images/plat.png" alt="Overview of platform standards" /></p>
<h2 id="overview-of-operational-standards"><a class="header" href="#overview-of-operational-standards">Overview of operational standards</a></h2>
<p><img src="content/../images/oper.png" alt="Overview of operational standards" /></p>
<h2 id="amr-specific-platform-standards"><a class="header" href="#amr-specific-platform-standards">AMR Specific Platform Standards</a></h2>
<p><img src="content/../images/wut.png" alt="AMR Specific Platform Standards" /></p>
<!--- ![AMR Specific Platform Standards](../images/fig1.png) -->
<p align="center">
    <img width="400" height="300" src="content/../images/fig1.png">
</p><div style="break-before: page; page-break-before: always;"></div><h1 id="platform-standards-1"><a class="header" href="#platform-standards-1">Platform standards</a></h1>
<h2 id="overview-of-platform-standards-1"><a class="header" href="#overview-of-platform-standards-1">Overview of platform standards</a></h2>
<p><img src="content/../images/plat.png" alt="Overview of platform standards" /></p>
<h2 id="overview-of-operational-standards-1"><a class="header" href="#overview-of-operational-standards-1">Overview of operational standards</a></h2>
<p><img src="content/../images/oper.png" alt="Overview of operational standards" /></p>
<h2 id="amr-specific-platform-standards-1"><a class="header" href="#amr-specific-platform-standards-1">AMR Specific Platform Standards</a></h2>
<p><img src="content/../images/wut.png" alt="AMR Specific Platform Standards" /></p>
<!--- ![AMR Specific Platform Standards](../images/fig1.png) -->
<p align="center">
    <img width="400" height="300" src="content/../images/fig1.png">
</p><div style="break-before: page; page-break-before: always;"></div><h1 id="risk-assessment-1"><a class="header" href="#risk-assessment-1">Risk Assessment</a></h1>
<h2 id="many-forms-of-functional-safety-iec-61508-1"><a class="header" href="#many-forms-of-functional-safety-iec-61508-1">Many forms of Functional Safety (IEC 61508)</a></h2>
<p><img src="headers/../images/arrow.png" alt="Many forms of Functional Safety (IEC 61508)" /></p>
<h2 id="approach-to-risk-assessment--hazards-analysis-1"><a class="header" href="#approach-to-risk-assessment--hazards-analysis-1">Approach to Risk Assessment &amp; Hazards Analysis</a></h2>
<ul>
<li>Classifications (Mix of IEC 62304 and IEC 61508 SIL definitions):
<ul>
<li>Class A: No injury or damage to health is possible.</li>
<li>Class B: Injury is possible, but not serious.</li>
<li>Class C: Death or serious injury is possible.</li>
</ul>
</li>
</ul>
<p><img src="headers/../images/approach.png" alt="Approach to Risk Assessment &amp; Hazards Analysis" /></p>
<h2 id="approach-to-software-systems-safety-iso-62304-1"><a class="header" href="#approach-to-software-systems-safety-iso-62304-1">Approach to Software Systems Safety (ISO 62304)</a></h2>
<p><img src="headers/../images/approach_soft.png" alt="Approach to Software Systems Safety (ISO 62304)" /></p>
<h1 id="difference-in-class-1"><a class="header" href="#difference-in-class-1">Difference in Class</a></h1>
<h3 id="class-b-1"><a class="header" href="#class-b-1">Class B</a></h3>
<p><img src="headers/../images/classb.png" alt="Class B" /></p>
<h3 id="vs-class-c-lvl-a-sil-4-1"><a class="header" href="#vs-class-c-lvl-a-sil-4-1">VS Class C/ Lvl A/ SIL 4</a></h3>
<p><img src="headers/../images/classc.png" alt="Class C/ Lvl A/ SIL 4" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="software-quality-assurance"><a class="header" href="#software-quality-assurance">Software Quality Assurance</a></h1>
<h2 id="approach"><a class="header" href="#approach">Approach</a></h2>
<h2 id="commercial-qa-tool"><a class="header" href="#commercial-qa-tool">Commercial QA tool</a></h2>
<p>Parasoft
<img src="headers/../images/parasoft.png" alt="Parasoft" /></p>
<h2 id="many-forms-of-functional-safety-iec-61508-2"><a class="header" href="#many-forms-of-functional-safety-iec-61508-2">Many forms of Functional Safety (IEC 61508)</a></h2>
<p><img src="headers/../images/arrow.png" alt="Many forms of Functional Safety (IEC 61508)" /></p>
<h2 id="approach-to-risk-assessment--hazards-analysis-2"><a class="header" href="#approach-to-risk-assessment--hazards-analysis-2">Approach to Risk Assessment &amp; Hazards Analysis</a></h2>
<ul>
<li>Classifications (Mix of IEC 62304 and IEC 61508 SIL definitions):
<ul>
<li>Class A: No injury or damage to health is possible.</li>
<li>Class B: Injury is possible, but not serious.</li>
<li>Class C: Death or serious injury is possible.</li>
</ul>
</li>
</ul>
<p><img src="headers/../images/approach.png" alt="Approach to Risk Assessment &amp; Hazards Analysis" /></p>
<h2 id="approach-to-software-systems-safety-iso-62304-2"><a class="header" href="#approach-to-software-systems-safety-iso-62304-2">Approach to Software Systems Safety (ISO 62304)</a></h2>
<p><img src="headers/../images/approach_soft.png" alt="Approach to Software Systems Safety (ISO 62304)" /></p>
<h1 id="difference-in-class-2"><a class="header" href="#difference-in-class-2">Difference in Class</a></h1>
<h3 id="class-b-2"><a class="header" href="#class-b-2">Class B</a></h3>
<p><img src="headers/../images/classb.png" alt="Class B" /></p>
<h3 id="vs-class-c-lvl-a-sil-4-2"><a class="header" href="#vs-class-c-lvl-a-sil-4-2">VS Class C/ Lvl A/ SIL 4</a></h3>
<p><img src="headers/../images/classc.png" alt="Class C/ Lvl A/ SIL 4" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="verification-and-validation---rmf-scheduler"><a class="header" href="#verification-and-validation---rmf-scheduler">Verification and Validation - RMF Scheduler</a></h1>
<p>Verification and validation was done in two steps in simulated environments in Gazebo.</p>
<h2 id="rationale-1"><a class="header" href="#rationale-1">Rationale</a></h2>
<p>Having Software-in-the-loop (SIL) testing using simulation allows us to identify bugs and errors in RMF without the need for physical testing. The early detection of problems allows for quick fixes and significantly reduces the development time and cost.</p>
<p>For this test, we are not simulating the entirety of the robot and building. Instead, we are focusing mainly on testing the RMF Scheduler, the backbone to RMF's operations.</p>
<h2 id="objectives"><a class="header" href="#objectives">Objectives</a></h2>
<p>We aim to achieve the following:</p>
<ul>
<li>Verify the capabilities of the RMF Scheduler</li>
<li>Identify the breaking points of the RMF Scheduler</li>
</ul>
<h2 id="methodology"><a class="header" href="#methodology">Methodology</a></h2>
<p>To achieve our objectives, we created 2 groups of test scenarios - basic tests and standalone tests.</p>
<p><strong>Basic tests</strong> refer to the core competencies of the RMF scheduler, such as ability to interface with doors, lifts, as well as perform basic traffic conflict resolution in the deployment world. The testing information and results are available <a href="headers/../content/basic-tests.html">here</a>.</p>
<p><strong>Standalone tests</strong> refer to the limits and breaking points of the RMF scheduler, it used a world designed to create a scenario with a high amount of traffic conflicts, that the scheduler has to constantly solve to avoid deadlocks. The testing information and results are available <a href="headers/../content/standalone-tests.html">here</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basic-test-videos"><a class="header" href="#basic-test-videos">Basic Test Videos</a></h1>
<ol>
<li><a href="content/basic-tests.html#introduction">Introduction</a>
<ol>
<li><a href="content/basic-tests.html#basic1">Basic Test 1</a></li>
<li><a href="content/basic-tests.html#basic2">Basic Test 2</a></li>
<li><a href="content/basic-tests.html#basic3">Basic Test 3</a></li>
<li><a href="content/basic-tests.html#basic4">Basic Test 4</a></li>
</ol>
</li>
<li><a href="content/basic-tests.html#summary">Summary of Test Results</a></li>
</ol>
<h2 id="introduction"><a class="header" href="#introduction">Introduction <a name="introduction"></a></a></h2>
<p>Below are a series of tests that verify the capabilities of the RMF scheduler. These tests are being conducted in simulation, using the Tampines Regional Library (TRL) world that was generated using OSRC's Traffic Editor. The relevant files can be found in <a href="https://github.com/TRL-RMF/trl">this repository</a>. 
The results are shown in the videos under each test statement.</p>
<h2 id="basic-test-1--moving-through-lifts-and-doors"><a class="header" href="#basic-test-1--moving-through-lifts-and-doors">Basic Test 1 : Moving through lifts and doors <a name="basic1"></a></a></h2>
<p>The robot is expected to move through lift(s) and door(s) to navigate to its eventual destination. </p>
<video src="https://user-images.githubusercontent.com/54682777/178696368-53193b9f-be59-4b3d-bba7-eac2c2be3fb2.mp4" controls="controls" style="max-width: 730px;">
</video>
<h2 id="basic-test-2--deconflict-ing-robots-through-lift"><a class="header" href="#basic-test-2--deconflict-ing-robots-through-lift">Basic Test 2 : Deconflict-ing robots through lift <a name="basic2"></a></a></h2>
<p>RMF is expected to demonstrate ability to de-conflict navigation plans of 2 robots from different OEMs, both of which are using the lift. </p>
<p><video src="https://user-images.githubusercontent.com/54682777/178697123-48d2bcea-61a3-44c0-8045-ca93de4ace4c.mp4" 
controls="controls" style="max-width: 730px;">
</video></p>
<h2 id="basic-test-3--deconflict-ing-robots-through-door"><a class="header" href="#basic-test-3--deconflict-ing-robots-through-door">Basic Test 3 : Deconflict-ing robots through door <a name="basic3"></a></a></h2>
<p>RMF is expected to demonstrate ability to de-conflict navigation plans of 2 robots from different OEMs, both of which are using the same door.</p>
<video src="https://user-images.githubusercontent.com/54682777/178697144-3eb1b4d6-607d-4d67-bc06-5dea07b3410f.mp4" controls="controls" style="max-width: 730px;">
</video>
<h2 id="basic-test-4--emergency-alarm"><a class="header" href="#basic-test-4--emergency-alarm">Basic Test 4 : Emergency Alarm <a name="basic4"></a></a></h2>
<p>RMF is expected to demonstrate ability to navigate to a safe “parking spot” when the emergency alarm is activated.</p>
<video src="https://user-images.githubusercontent.com/54682777/178697161-52193789-93af-479e-b646-15fd760114ae.mp4" controls="controls" style="max-width: 730px;">
</video>
<h1 id="summary-of-tests--results"><a class="header" href="#summary-of-tests--results">Summary of Tests &amp; Results <a name="summary"></a></a></h1>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center"></th><th style="text-align: center">Integration (Doors)</th><th style="text-align: center">Integration (Lifts)</th><th style="text-align: center">Traffic Deconflicting</th><th style="text-align: center">Emergency Alarm</th><th style="text-align: center">Verified?</th></tr></thead><tbody>
<tr><td style="text-align: center"><strong>Basic Test 1</strong></td><td style="text-align: center">✔️</td><td style="text-align: center">✔️</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">✅</td></tr>
<tr><td style="text-align: center"><strong>Basic Test 2</strong></td><td style="text-align: center"></td><td style="text-align: center">✔️</td><td style="text-align: center">✔️</td><td style="text-align: center"></td><td style="text-align: center">✅</td></tr>
<tr><td style="text-align: center"><strong>Basic Test 3</strong></td><td style="text-align: center">✔️</td><td style="text-align: center"></td><td style="text-align: center">✔️</td><td style="text-align: center"></td><td style="text-align: center">✅</td></tr>
<tr><td style="text-align: center"><strong>Basic Test 4</strong></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">✔️</td><td style="text-align: center">:warning:</td></tr>
</tbody></table>
</div>
<p>As shown in Basic Tests 1-3, it was found that the RMF Scheduler was largely able to fulfil its basic competencies of controlling the lifts and doors, along with active traffic de-conflicting.</p>
<p>In Basic Test 4, RMF has a limitation. When the robot moves along the expected lanes of RMF, it is able to return to the nearest &quot;safe&quot; waypoint during the activation of the emergency alarm. However, if the robot is midway through the bookshelf scanning task, it will not be able to go back to the nearest &quot;safe&quot; waypoint. A way to work around this behavior at the time of writing (Dec 2022) is to manually cancel the task the robot is doing, after the task is cancelled the robot will be routed to the closest parking spot.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="standalone-tests"><a class="header" href="#standalone-tests">Standalone Tests</a></h1>
<ol>
<li><a href="content/standalone-tests.html#introduction">Introduction</a></li>
<li><a href="content/standalone-tests.html#summary">Summary of Test Results</a></li>
</ol>
<h2 id="introduction-1"><a class="header" href="#introduction-1">Introduction <a name="introduction"></a></a></h2>
<p>To stress test the RMF scheduler the <a href="https://github.com/open-rmf/rmf_demos/#battle-royale-scenario">demo Battle Royale</a> scenario was used.</p>
<p>The battle royale demo includes an X crossing with four robots that are told to loop between two opposite points, requiring each robot to share a corridor with another robot and the junction with three other robots.</p>
<p><img src="content/../images/battle_royale_gazebo.png" alt="battle_royale_gazebo" /></p>
<p><img src="content/../images/battle_royale_rviz.png" alt="battle_royale_rviz" /></p>
<h2 id="summary-of-test-results"><a class="header" href="#summary-of-test-results">Summary of Test Results <a name="summary"></a></a></h2>
<p>The test was left to run overnight and throughout the project some stability issues leading to robot deadlocks were identified. In-depth debugging and updates to the scheduler were pushed as part of this deployment that increased the reliability until overnight stress tests were successful. The changes introduced can be seen in the <a href="https://github.com/open-rmf/rmf_internal_msgs/pull/45">rmf_internal_msgs</a>, <a href="https://github.com/open-rmf/rmf_ros2/pull/228">rmf_ros2</a>, <a href="https://github.com/open-rmf/rmf_traffic/pull/86">rmf_traffic</a> and <a href="https://github.com/open-rmf/rmf_demos/pull/157">rmf_demos</a> pull requests.
Specifically, the RMF scheduler makes extensive use of parallel and asynchronous behavior to operate as fast and efficiently as possible. Several edge cases of the scheduler behaving incorrectly were fixed, for example when fleets submitted bad estimates for their tasks, or fleet adapter responses were sent in the wrong order to the scheduler.</p>
<div style="break-before: page; page-break-before: always;"></div><p align="center">
 <img src="headers/../images/systems_test_plan.png"/>
    <br>
    <em>Different levels of tests.</em>
</p>
<p>To ensure a stable system integrating multi-party components, different
levels of testing were required. As shown in the diagram above, three
levels of tests were carried out.</p>
<p>Subsequent sub-chapters will go more in depth on the tests carried out
for this project. This section will be dedicated to giving an overview
of the executed tests.</p>
<p><strong><br />
Standalone tests</strong> which were carried out for each major component
involved in this project, namely: RMF, Lifts, Doors and Robot. Each
standalone component test falls under the responsibility of the
individual component vendors. All tests for each component were composed
of different scenarios / cases depending on the project requirement.</p>
<p>For example, for the case of this project, Senserbot tested its robot's
capabilities in crossing the gap at the lift. For RMF's case, the tests
carried out were majorly intensively done in simulation as described in
Chapter 8.</p>
<p><strong>Integration tests</strong> involve sub-system integrated testing. For the
Tampines Regional Library project and since RMF is the overarching meta
system integrating all components, this involves integrated testing
between:</p>
<ol>
<li>RMF - Lift</li>
<li>RMF - Doors</li>
<li>RMF - Robots</li>
</ol>
<p>The tests mainly revolve around testing all actions and feedback sent
and received by RMF with its corresponding subsystem.</p>
<p><strong>Final tests</strong> are where all sub-systems are integrated and are tested
based on operational scenarios. This also serves as the User Acceptance
Tests for this project.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="standalone-test---static-lift-rig-tests-senserbot"><a class="header" href="#standalone-test---static-lift-rig-tests-senserbot">Standalone Test - Static Lift Rig Tests (Senserbot)</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="standalone-test---lifts-and-doors"><a class="header" href="#standalone-test---lifts-and-doors">Standalone test - Lifts and Doors</a></h1>
<p>Apart from the multi-level design reviews carried out for the developed
components for lift and door integration, a list of tests have also been
carried out on the standalone level to ensure quality.</p>
<p><strong>Standalone tests for lift integration</strong></p>
<p>To respect the confidentiality of the lift vendor who provided its
services and helping hands in this project, the details of the conducted
tests will not be disclosed in this section. However, this section will
still give a description of the tested items / cases to provide a better
understanding of what needs to be tested to ensure quality and
stability.</p>
<p>For RMF to control the lift, the lift vendor has retrofitted its service
lift with electronics which exposes its functionality to external
systems via dry contact interfaces. A beckhoff PLC coupled with
additional electronics (Lift Controller Box) which holds the logic in
firing the correct sequence of signals to the lift vendor's electronics
serves as a safe and stable intermediate controller. Higher level
software calls can then be routed to the PLC to control the lift. A more
detailed description of the work in integrating the lift can be found in
Chapter 10.2.2.</p>
<p>Table 1 below shows a high level description of the tests carried out
for the components for lift integration.</p>
<p align="center">
Table 1: Tests for components for lift integration
</p>
<div class="table-wrapper"><table><thead><tr><th></th><th></th><th></th><th></th></tr></thead><tbody>
<tr><td><em>Components</em></td><td><em>Categories</em></td><td><em>Test Cases</em></td><td><em>Reasons</em></td></tr>
<tr><td>Retrofitted Electronics from lift vendor</td><td>Validation Test</td><td>Testing validity of “lift in operation” feedback signal. <br/> <br/> Reservation of lift. <br/> <br/> Release of lift. <br/> <br/> Calling lift to go to a level.</td><td>This test is critical as it serves the following purposes: <br/> 1. Ensure installation and enhancement <br/> works from the lift vendor are done correctly. <br/> 2. Ensure the handovered system works as <br/> intended to pre-given specification documents. <br/> The design of the developed lift controller box references these specification documents. <br/> A test early on will show any discrepancy in provided information which may affect the final developed design.</td></tr>
<tr><td>Lift Controller Box</td><td>Functionality Test</td><td>Testing reading of “lift in operation” feedback signal. <br/><br/> Reservation of lift. <br/><br/> Release of lift. <br/><br/> Calling lift to go to a level. <br/><br/> Exceptional Behaviors:  <br/> - Turnkey to non-interfering mode <br/> - Electrical release of signals in error / exception mode <br/> - Reconnecting when loss of 2 way heartbeat <br/> - And more <br/> <br/> Quality checks <br/> - Thermal ventilation <br/> - Crimping and connection quality <br/> - Mounting reliabilities</td><td>To ensure the developed system is assembled <br/> and fabricated as designed.To ensure fabricated <br/> electronics are stable, safe and durable for 24/7 <br/> operations.</td></tr>
<tr><td></td><td>Software Test</td><td>Static Analysis Tests</td><td>Ensure production quality code. <br/> Expose vulnerabilities in “distance” &amp; “hard-to-reach” code.</td></tr>
</tbody></table>
</div>
<p><strong>Standalone tests for door integration</strong></p>
<p>Similar to the standalone tests done for lift integrations, the
developed door controllers also follow similar test cases to ensure its
reliability.</p>
<p>A more in-depth explanation on the work behind door integrations can be
found in Chapter 10.2.2.</p>
<p align="center">
Table 2: Tests for components for door integration
</p>
<div class="table-wrapper"><table><thead><tr><th></th><th></th><th></th><th></th></tr></thead><tbody>
<tr><td><em>Components</em></td><td><em>Categories</em></td><td><em>Test Cases</em></td><td><em>Reasons</em></td></tr>
<tr><td>Door Controller Box</td><td>Functionality Test</td><td>Testing reading of door states<br/><br/>Testing of commanding doors to close and open. <br/><br/>Exceptional Behaviors <br/>- Switch to non-interfering mode <br/>- Connection loss behaviors <br/>- And more<br/><br/>Quality checks</td><td>To ensure the developed system is assembled and fabricated as designed.<br/><br/>To ensure fabricated electronics are stable, safe and durable for 24/7 operations.</td></tr>
<tr><td></td><td>Software Test</td><td>Static Analysis Tests</td><td>Ensure production quality code. <br/> Expose vulnerabilities in “distance” &amp; “hard-to-reach” code.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="integration-tests"><a class="header" href="#integration-tests">Integration Tests</a></h1>
<p><strong>RMF-Lift and RMF-Doors</strong></p>
<p>On the second level, integration tests between the Lift as well as Doors
and RMF were carried out to ensure integration quality and correctness
as well as expose any shortcomings or bugs in terms of behavioral
mismatches between the two systems.</p>
<p>A more in depth explanation of the architecture between RMF and the
infrastructure systems can be found in Chapter 10.2.2.</p>
<p align="center">
Table 3: Tests for integration of RMF-Lifts and RMF-Doors
</p>
<div class="table-wrapper"><table><thead><tr><th></th><th></th><th></th><th></th></tr></thead><tbody>
<tr><td><em>Sub-Systems</em></td><td><em>Categories</em></td><td><em>Test Cases</em></td><td><em>Reasons</em></td></tr>
<tr><td>RMF-Lift</td><td>Functionality Test</td><td>Changing of modes: AGV mode, Human mode.<br/><br/>Calling of lift to level 2,3,4,5,6.<br/><br/>Reading and publishing of lift states for all modes and all floors.<br/><br/>Exceptional behaviors <br/>- Loss of comms <br/>- Fire Alarm mode <br/>- Timeouts -<br/> Non-interfering mode <br/>- And more<br/><br/>Mechanical quality checks<br/>- Lift controller box mounting <br/>- Dust protection</td><td>To ensure integration is done correctly. <br/><br/> To ensure the system is operational even during exceptional situations. <br/><br/> To ensure no unintended “hanging” states for all situations. <br/><br/> To ensure the system is recoverable after exceptional situations. <br/><br/> To ensure the lift controller box is installed in a safe and reliable manner.</td></tr>
<tr><td>RMF-Doors</td><td></td><td>Commanding of doors <br/><br/> Reading and publishing door states <br/><br/> Exceptional behaviors<br/>- Loss of comms <br/>- Fire Alarm mode <br/>- Timeouts <br/>- Non-interfering mode <br/>- And more<br/><br/>Mechanical quality checks<br/>- Door controller box mounting<br/> - Sensor mounting reliability <br/>- Dust protection</td><td>To ensure integration is done correctly.<br/><br/>To ensure the system is operational even during exceptional situations.<br/><br/>To ensure no unintended “hanging” states for all situations.<br/><br/>To ensure the system is recoverable after exceptional situations.<br/><br/>To ensure the lift controller box is installed in a safe and reliable manner.</td></tr>
<tr><td>RMF- LiftRMF-Doors</td><td>Connectivity Stress Test</td><td>Extended period of packet drop monitoringValidating no single point of failure</td><td>To ensure the reliability of the connectivity. <br/><br/> Due to circumstances, the infrastructure-rmf software adapter for all integrated doors and lifts is a monolithic piece of code multithreaded into different processes. This test also covers the code that never blocks / crashes due to a single point of hardware failure in any of the door or lift controllers.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="final-test"><a class="header" href="#final-test">Final Test</a></h1>
<p>This is the test where all components including Senserbot, RMF and the
integrated lifts and doors are integrated.</p>
<p>For this project, a total of three scenarios (which represent similar
operational situations) were tested. The tested scenarios are the
following:</p>
<ol>
<li>
<p>Robot moving through lift and door to workcell to perform its mission</p>
<p>a.  To demonstrate the ability of robots to take lift to different floors, open and move through doors and start its task.</p>
<p>b.  Consists of 20 permutations of robots taking lift from Floor A to Floor B and opening the doors for both Floor A and Floor B.</p>
</li>
<li>
<p>Wireless Charging of Robot</p>
<p>a.  To demonstrate the robot can be commanded by RMF to go and get charged at level 6 wireless charging point from any floor.</p>
<p>b.  Consists of 5 permutations of the robot taking lift from Floor X to Floor 6's charging point.</p>
</li>
<li>
<p>Robot's movement during Emergency</p>
<p>a.  To demonstrate that during an emergency situation such as a building fire alarm being triggered, the robots can automatically move out of the main paths of evacuation to prevent blockage. It also covers recovery behaviors of the robot when the emergency situation is disengaged.</p>
<p>b.  Consists of 5 permutations of the robot traveling when a fire alarm is triggered.</p>
</li>
</ol>
<p>The test plans for the above scenarios can be downloaded here.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="baseline-0"><a class="header" href="#baseline-0">Baseline 0</a></h1>
<h2 id="static-test-rig"><a class="header" href="#static-test-rig">Static test rig</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="design-documents"><a class="header" href="#design-documents">Design Documents</a></h1>
<p>An excellent resource to have an overview of RMF and the integration process is the <a href="https://osrf.github.io/ros2multirobotbook/">ROS2 multirobot book</a>, it's recommended to read it before embarking in any integration effort.</p>
<h2 id="rmf-bms-integrator"><a class="header" href="#rmf-bms-integrator">RMF-BMS Integrator</a></h2>
<p>Integration between RMF and infrastructure (doors, lifts and in some cases workcells) is done through adapters.</p>
<p>The purpose of infrastructure adapters is to act as a translation layer between proprietary APIs (i.e. PLCs, cloud based) and RMF. Open source implementation are available in the <a href="https://github.com/open-rmf/awesome_adapters">awesome_adapters</a> repo, at the time of writing for <a href="https://github.com/sharp-rmf/kone_lift_controller">Kone lifts</a> and <a href="https://github.com/open-rmf/door_adapter_dormakaba">Dormakaba doors</a>.</p>
<p>Templates are also provided for both <a href="https://github.com/open-rmf/door_adapter_template">doors</a> and <a href="https://github.com/open-rmf/lift_adapter_template">https://github.com/open-rmf/lift_adapter_template</a>. In templates, integrators only need to fill a few functions that are specific to the API of the chosen device, for example for doors, a function to open, one to close and one to query the state of the door.</p>
<p>Once a door / lift adapter is added to the system RMF, and through it any fleet that is integrated in the future, will be able to use it for operations.</p>
<h2 id="rmf-core-cloud-integrator"><a class="header" href="#rmf-core-cloud-integrator">RMF-Core (Cloud) Integrator</a></h2>
<p>A <a href="https://github.com/open-rmf/rmf_deployment_template/">template</a> is provided to integrators to help with cloud deployment, it is rapidly growing so it is recommended to check the repository itself for the latest integration instructions.</p>
<p>At the date of writing, it uses github actions to build docker images which are hosted in a cloud registry and ran in a cloud kubernetes (k3s) cluster configured through helm charts. The template itself only builds the core RMF services but provides examples on how to add custom pods (i.e. to run fleet adapters or infrastructure adapters).</p>
<h2 id="rmf-amr-fleet-integrator"><a class="header" href="#rmf-amr-fleet-integrator">RMF-AMR Fleet Integrator</a></h2>
<p>Integration between RMF and robot fleets is done through fleet adapters.</p>
<p>Similar to infrastructure adapters, several open source implementations for a variety of robot vendors / models are available in the <a href="https://github.com/open-rmf/awesome_adapters">awesome_adapters</a> repo. We also provide both a <a href="https://github.com/open-rmf/fleet_adapter_template/">fleet adapter template</a> and a <a href="https://github.com/open-rmf/rmf_demos/tree/main/rmf_demos_fleet_adapter">demo fleet adapter</a> that works with Gazebo simulations, depending on preference either can be used to integrate with a new robot vendor.</p>
<p>Several types of integration are possible depending on the level of control given by the robot vendor, for details on the process consult the relevant <a href="https://osrf.github.io/ros2multirobotbook/integration_fleets.html">multirobot book chapter</a></p>
<h2 id="overall-systems-integrator"><a class="header" href="#overall-systems-integrator">Overall Systems Integrator</a></h2>
<p>An overview of the overall system integration effort is available in the <a href="https://osrf.github.io/ros2multirobotbook/integration.html">Integration chapter</a> in the multirobot book. As an overview of the steps that are part of a usual deployment:</p>
<ol>
<li>Obtain building blueprints / maps, then design a traffic map through <a href="https://github.com/open-rmf/rmf_traffic_editor">traffic editor.</a></li>
<li>Integrate and configure the desired mobile robot fleets through fleet adapters.</li>
<li>Integrate as needed doors, lifts or workcells through infrastructure adapters.</li>
<li>Test on a local machine for simplicity to make sure all the parts work as needed.</li>
<li>Create a copy of the <a href="https://github.com/open-rmf/rmf_deployment_template/">https://github.com/open-rmf/rmf_deployment_template/</a> and setup the image building / cloud cluster pipeline.</li>
<li>Test and iterate, updating cloud images when needed, until performance is satisfactory.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="amr-to-building-interactions"><a class="header" href="#amr-to-building-interactions">AMR to Building Interactions</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="amr-integration"><a class="header" href="#amr-integration">AMR Integration</a></h1>
<h2 id="fleet-adapter"><a class="header" href="#fleet-adapter">Fleet Adapter</a></h2>
<h3 id="architecture"><a class="header" href="#architecture">Architecture</a></h3>
<h2 id="robot-modifications"><a class="header" href="#robot-modifications">Robot Modifications</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="lift-and-doors-integration"><a class="header" href="#lift-and-doors-integration">Lift and Doors Integration</a></h1>
<h2 id="overall-system-overview"><a class="header" href="#overall-system-overview">Overall System Overview</a></h2>
<p>The objective of lift and doors integration with RMF (Robotics
Middleware Framework) is to facilitate infrastructure interoperability
with the deployed robots in the building.</p>
<p>A physical server, a lift controller box for the service lift and 5 door
controllers for doors on levels 2 through 6 are installed on site to
achieve the aforementioned objective. Refer to figure 1 to get an
overview of the overall architecture.</p>
<p align="center">
 <img src="content/./../images/integration_architecture.png"/>
    <br>
    <em>Figure 1: Physical system architecture.</em>
</p>
<p>The server is located at the library's network/server room and it
communicates to RMF via AWSCore/MQTT. A PLC is housed in a lift controller
box at level 6 cargo lift lobby, which is shown in figure 2. It is
connected to the server via LAN/Ethernet.</p>
<p align="center">
 <img src="content/./../images/lift_lcb.png"/>
    <br>
    <em>Figure 2: Lift Controller Box installed on-site (front and side views)</em>
</p>
<p>A controller box was installed for each door to control its movement, as
shown in figure 3. The controller box interfaces with the door's
internal circuit (pre-installed automated door controller) and motion
sensor as well as its security card access system. An IO acquisition
module is housed in each controller box which is connected to the server
via LAN/Ethernet cable.</p>
<p align="center">
 <img src="content/./../images/door_dcb.png"/>
    <br>
    <em>Figure 3: Door Controller Box installed on-site</em>
</p>
<p>With regards to the particular communication protocol between each
hardware component, RMF communicates to the infrastructure via a ROS2-AWSCore/MQTT bridge. RMF sends
a LiftRequest.msg to AWSCore to command the lift while it receives
LiftState.msg as lift's status update at a frequency of 1 Hz. Similarly
for doors, with DoorRequest.msg and DoorState.msg.</p>
<p>Server parses a LiftRequest message and sends relevant commands to a
PLC (Programmable Logic Controller) via ADS communication protocol
which is then forwarded to the lift by manipulating corresponding
signals via dry contact. Beckhoff CX9020 was the PLC model used for this
project. It is connected to four digital input terminals and six digital
output terminals.</p>
<p>Similarly, the server parses a DoorRequest message and sends relevant
commands to the IO module via RESTful API, which then directly interacts
with the pre-installed automated door controller via installed electronics. Adam
6052 was the IO acquisition module used for this project.</p>
<p>The following sections explore each component in detail.</p>
<h1 id="integration-with-lift"><a class="header" href="#integration-with-lift">Integration with Lift</a></h1>
<h2 id="agv-mode"><a class="header" href="#agv-mode">AGV Mode</a></h2>
<p>To facilitate the project's operations, the lift vendor upgraded the
installed lift to accommodate a new mode of operation called AGV mode.
Under this mode of operation, it allowed external hardware to interface
with its internal circuit and control the lift movements.</p>
<p>All new hall calls (buttons pressed from lobby to call lift to that
particular floor) and car calls (floor number buttons pressed from
within lift) are ignored in this mode. Before transitioning into AGV
mode from human/manual mode, all the existing car calls are completed to
ensure passengers already onboard the lift are allowed to get off at
their intended destination floor whereas hall calls are cancelled. This
mode is displayed in the elevator user interface panel as shown in
figure 4 and the same is announced from the speaker as well.</p>
<p align="center">
 <img src="content/./../images/agv_mode.png" width="250" height="300" />
    <br>
    <em>Figure 4: The following message: "ATTENTION AUTOMATIC TRANSPORT OPERATION" is shown on all car and hall lift displays.</em>
</p>
<h2 id="flow-of-operations"><a class="header" href="#flow-of-operations">Flow of operations</a></h2>
<p>The standard flow of operations is as follows (with respect to lift
controller): </p>
<ol>
<li>Particular input signals are activated if the lift is in
normal, working condition to transition into AGV mode.</li>
<li>After lift finishes existing car calls, it switches to AGV mode. Lift then moves to
the destination floor as requested.</li>
<li>After a successful transit, it stays at the same floor with its doors kept open until a new command is received.</li>
<li>It exits AGV mode to get to human/manual mode after the robot has finished its transit.</li>
</ol>
<p>At a particular floor, a specific signal ensures that lift doors are
open to facilitate robot movement into the lift car. After receiving a
signal to move to another floor, the lift doors are automatically
closed.</p>
<p align="center">
 <img src="content/./../images/lift_agv_mode.png" width="450" height="400" />
    <br>
    <em>Figure 5: Lift in AGV mode at floor 6 with its doors kept open.</em>
</p>
<p>The lift is connected directly to the building's fire alarm signal and
alerts PLC consequently. Lift immediately exits AGV mode (PLC goes into
error state) and proceeds to the first floor and keeps its doors open.
The alarm beacon on top of lift controller box (refer to figure 6) is
enabled which lights up as a red light to alert the nearby patrons and
library staff of the emergency situation.</p>
<p>If the PLC is in error state, all requests are ignored until the
recovery behaviour has been implemented. At the end of this section, all the
possible exception scenarios are listed in more detail.</p>
<p>Please note that as per project requirements, floor B1 is currently
excluded from the operational flow and lift controller box cannot
command the lift to reach it. This can be easily modified later if
needed by making corresponding changes in the lift controller box
hardware and software.</p>
<h2 id="lift-controller-box"><a class="header" href="#lift-controller-box">Lift Controller Box</a></h2>
<p align="center">
 <img src="content/./../images/lcb_architecture.png"/>
    <br>
    <em>Figure 6: Lift Controller Box with respect to the physical system architecture.</em>
</p>
<p>Lift controller box is installed at the sixth floor in the service lift
4 lobby of the library. It looks as shown in figure 6, with different
external components labelled in the image. A conceptual diagram with the
box's contents and its connections to external peripherals and devices
is shown in figure 7.</p>
<p>A turnkey slot is provided to facilitate the library staff to disable or
enable the AGV mode option. If it is toggled towards the Manual mode
option, lift will remain in manual mode and all RMF requests to switch
to AGV mode will be ignored.</p>
<p>A Simulated Fire Alarm button is included to mimic an actual fire alarm.
Its main purpose is to help in the testing of fire alarm exception case
and serves no purpose after deployment. In both simulated and actual
fire, the alarm sound beacon sounds and lights up to alert the nearby
patrons and staff of the emergency.</p>
<p align="center">
 <img src="content/./../images/labelled_lcb.png"/>
    <br>
    <em>Figure 7: Labelled lift controller box.</em>
</p>
<p align="center">
 <img src="content/./../images/lcb_conceptual_diagram.png"/>
    <br>
    <em>Figure 8: Conceptual connections diagram of the lift controller box.</em>
</p>
<h1 id="integration-with-doors"><a class="header" href="#integration-with-doors">Integration with Doors</a></h1>
<h2 id="flow-of-operations-1"><a class="header" href="#flow-of-operations-1">Flow of Operations</a></h2>
<p>The standard flow of operations is quite straightforward (with respect
to the door controller): </p>
<ol>
<li>If the door controller is not offline, either
open/close command is received and the door is respectively actuated.</li>
<li>In open command, the door is kept open until explicitly commanded
otherwise.</li>
<li>If the door controller is offline, all requests are ignored
until it is back online.</li>
</ol>
<h2 id="door-controller-box"><a class="header" href="#door-controller-box">Door Controller Box</a></h2>
<p align="center">
 <img src="content/./../images/dcb_architecture.png"/>
    <br>
    <em>Figure 9: Door Controller Boxes with respect to the physical system architecture.</em>
</p>
<p>Each door has its own door controller box, so there are 5 such boxes
installed on levels 2 through 6. It looks as shown in figure 10, with
different external components labelled in the image. A conceptual
diagram with the box's contents and its connections to external
peripherals and devices is shown in figure 11.</p>
<p align="center">
 <img src="content/./../images/labelled_dcb.png"/>
    <br>
    <em>Figure 10: Labelled door controller box.</em>
</p>
<p align="center">
 <img src="content/./../images/dcb_conceptual_diagram.png"/>
    <br>
    <em>Figure 11: Conceptual connections diagram of the door controller box.</em>
</p>
<p>The limit switches are used as feedback to confirm if the door has
'fully closed'. The pre-installed automated door controller's internal
circuit is utilised to confirm if the door has 'fully opened'.</p>
<h1 id="server"><a class="header" href="#server">Server</a></h1>
<p align="center">
 <img src="content/./../images/server_architecture.png"/>
    <br>
    <em>Figure 12: Server with respect to the physical system architecture.</em>
</p>
<p>The application is deployed via a Docker container. It utilises AWS IOT
Core cloud service to connect to the RMF lift adapter.</p>
<p align="center">
 <img src="content/./../images/server_software.png" width="350" height="300" />
    <br>
    <em>Figure 13: Software Architecture of server application.</em>
</p>
<p>A LiftState message is published to the AWS topic every 2 seconds which is
read by RMF to get all relevant information about the lift state at that
instance. The contents of the message is shown in figure 14. </p>
<p align="center">
 <img src="content/./../images/lift_state.png"/>
    <br>
    <em>Figure 14: ListState.msg contents.</em>
</p>
<p>The data to be published is retrieved via the PLC using ADS (Automation
Device Specification) communication protocol, which is Beckhoff's
preferred method.</p>
<p>RMF commands the lift by publishing a LiftRequest msg every 1 second on
a unique AWS topic which the server subscribes to. The contents of
the message is shown in figure 15. </p>
<p align="center">
 <img src="content/./../images/lift_request.png" width="550" height="500" />
    <br>
    <em>Figure 15: LiftRequest.msg contents.</em>
</p>
<p>A DoorState msg for each door is published to the respective AWS topic
every 2 seconds which is read by RMF to get all relevant information
about the door state at that instance. The contents of the message is
shown in figure 16. </p>
<p align="center">
 <img src="content/./../images/door_state.png"/>
    <br>
    <em>Figure 16: DoorState.msg contents.</em>
</p>
<p>RMF commands each door by publishing a DoorRequest msg every 1 second on
an AWS topic which the server subscribes to. This topic is the same for
all doors. The contents of the message is shown in figure 17. </p>
<p align="center">
 <img src="content/./../images/door_request.png"/>
    <br>
    <em>Figure 17: DoorRequest.msg contents.</em>
</p>
<h1 id="exception-scenarios"><a class="header" href="#exception-scenarios">Exception Scenarios</a></h1>
<p>The following subsections explore all possible exception cases for lift
and doors and their respective recovery behaviours. The application is
built in a non-blocking way, for example, if one door has error or is
offline, other doors and lift are unaffected and vice-versa.</p>
<h2 id="lift-exceptions-and-recovery-behaviour"><a class="header" href="#lift-exceptions-and-recovery-behaviour">Lift Exceptions and Recovery Behaviour</a></h2>
<p>Table 1 summarises the exception scenarios possible with regards to the
lift and its controller box. It also specifies the corresponding
recovery behaviour to handle the occurred exception.</p>
<p align="center">
Table 1: Exception Scenarios for service lift
</p>
<div class="table-wrapper"><table><thead><tr><th></th><th></th><th></th><th></th></tr></thead><tbody>
<tr><td><strong>Sr. No.</strong></td><td><strong>Error/Exception</strong></td><td><strong>Action</strong></td><td><strong>Recovery behaviour</strong></td></tr>
<tr><td>1</td><td>Loss of communications between <br/> server and PLC.</td><td>1. Lift goes back to manual mode. <br/> 2. PLC state goes to error state.</td><td>When the heartbeat is heard again, it goes<br/>  back to human mode. No need for human <br/> intervention.</td></tr>
<tr><td>2</td><td>Fire Alarm is activated.</td><td>1. Lift goes back to manual mode. <br/> 2. PLC state goes to error state. <br/>3. Sound beacon is switched on.</td><td>Manual intervention is needed. PLC will stay in <br/> error state until it is restarted.</td></tr>
<tr><td>3</td><td>Lift is not in operational state.</td><td>1. Lift goes back to manual mode. <br/> 2. PLC state goes to error state.</td><td>No need for human intervention. Operations <br/> will continue as they were after lift is back in <br/> operational state.</td></tr>
<tr><td>4</td><td>Simulated Fire Alarm button is <br/> pressed.</td><td>1. Lift goes back to manual mode. <br/> 2. PLC state goes to error state. <br/> 3. Alarm beacon is switched on.</td><td>Manual intervention is needed. PLC will stay in <br/> error state until it is restarted.</td></tr>
<tr><td>5</td><td>If turnkey is toggled towards <br/> Manual</td><td>1. Lift goes back to manual mode. <br/>2. PLC state goes to error state</td><td>To return things to normal, toggle turnkey <br/> towards AGV mode.</td></tr>
<tr><td>6</td><td>Mode Timeout (10 minutes)<br/>(Lift is unable to go to AGV <br/> mode from human mode)</td><td>1. Lift goes back to manual mode. <br/>2. PLC state goes to error state.</td><td>Manual intervention is needed. PLC will stay in <br/> error state until it is restarted.</td></tr>
<tr><td>7</td><td>Destination floor requested is <br/> not in available floors</td><td>1. Lift goes back to manual mode.</td><td>Operations flow is not hampered. RMF to send <br/> a correct destination floor in the next request.</td></tr>
<tr><td>8</td><td>Lift movement timeout - <br/> Lift did not reach destination <br/> floor after 2 minutes</td><td>1. Lift goes back to manual mode. <br/>2 . PLC state goes to error state.</td><td>Manual intervention is needed. PLC will stay in <br/> error state until it is restarted.</td></tr>
</tbody></table>
</div>
<p>If PLC goes into error state, it is indicated by the last LED on its
output terminal, as shown in figure 18:</p>
<p align="center">
 <img src="content/./../images/plc_error.png"/>
    <br>
    <em>Figure 18: Error state indication by LED on PLC, encircled by red ellipse.</em>
</p>
<h2 id="door-exceptions-and-recovery-behaviour"><a class="header" href="#door-exceptions-and-recovery-behaviour">Door Exceptions and Recovery Behaviour</a></h2>
<p>Table 2 summarises the exception scenarios possible with regards to the
lift and its controller box. It also specifies the corresponding
recovery behaviour to handle the occurred exception.</p>
<p align="center">
Table 2: Exception Scenarios for doors
</p>
<div class="table-wrapper"><table><thead><tr><th></th><th></th><th></th><th></th></tr></thead><tbody>
<tr><td><strong>Sr. No.</strong></td><td><strong>Error/Exception</strong></td><td><strong>Action</strong></td><td><strong>Recovery behaviour</strong></td></tr>
<tr><td>1</td><td>Loss of communications between server and door controller.</td><td>1. Door mode is reflected as ‘offline’.</td><td>Need for human intervention if it stays disconnected for a long time. After reconnection, the operation continues as before.</td></tr>
<tr><td>2</td><td>Cannot detect fully open or fully closed door state.</td><td>-</td><td>Need for manual intervention to fix the relevant sensor.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="rmf-traffic-editor"><a class="header" href="#rmf-traffic-editor">RMF Traffic Editor</a></h1>
<ol>
<li><a href="content/mapping.html#use">How we used Traffic Editor</a>
<ol>
<li><a href="content/mapping.html#intro">Introduction &amp; Installation</a>
<ol>
<li><a href="content/mapping.html#rmf_install">Installation with RMF</a></li>
<li><a href="content/mapping.html#independent_install">Independent Installation</a></li>
</ol>
</li>
<li><a href="content/mapping.html#GUI">Using Traffic Editor GUI</a>
<ol>
<li><a href="content/mapping.html#step1">Step 1: Naming your building</a></li>
<li><a href="content/mapping.html#step2">Step 2: Adding Floorplans</a></li>
<li><a href="content/mapping.html#step3">Step 3: Adding Robot Generated Map</a></li>
<li><a href="content/mapping.html#step4">Step 4: Map Alignment</a></li>
<li><a href="content/mapping.html#step5">Step 5: Adding Walls &amp; Flooring</a></li>
<li><a href="content/mapping.html#step6">Step 6: Adding Interior Walls &amp; Doors</a></li>
<li><a href="content/mapping.html#step7">Step 7: Adding Measurements</a></li>
<li><a href="content/mapping.html#step8">Step 8: Adding Robot Lanes</a></li>
<li><a href="content/mapping.html#step9">Step 9: Robots for Simulation</a></li>
<li><a href="content/mapping.html#step10">Step 10: Level Alignment</a></li>
<li><a href="content/mapping.html#step11">Step 11: Add Lift</a> </li>
</ol>
</li>
<li><a href="content/mapping.html#oops">Tips, Errors and Mistakes</a></li>
</ol>
</li>
</ol>
<h2 id="how-we-used-it"><a class="header" href="#how-we-used-it">How we used it! <a name="use"></a></a></h2>
<p>FYI: Traffic Editor is well documented with instructions on <a href="https://github.com/open-rmf/rmf_traffic_editor#installation">installation</a> and <a href="https://osrf.github.io/ros2multirobotbook/traffic-editor.html">usage</a>. The documentation below highlights how we used Traffic Editor during this project. Think of this page as the user's perspective 😊.</p>
<h3 id="introduction--installation"><a class="header" href="#introduction--installation">Introduction &amp; Installation <a name="intro"></a></a></h3>
<p><a href="https://github.com/open-rmf/rmf_traffic_editor">RMF Traffic Editor</a> is a repository containing a set of ROS2 packages that enable you to use a GUI to annotate floorplans to create traffic patterns (<code>rmf_traffic_editor</code> package) and convert this to a simulation world (<code>rmf_building_map_tools</code> package). </p>
<h4 id="installation-with-rmf"><a class="header" href="#installation-with-rmf">Installation with RMF <a name="rmf_install"></a></a></h4>
<p>If you have already installed RMF based on the <a href="https://github.com/open-rmf/rmf#building-from-sources">installation instructions</a>, you'll find that it is already included in the <code>rmf.repos</code> <a href="https://github.com/open-rmf/rmf/blob/main/rmf.repos?#L50-L53">file</a> and so it should already be in your <code>rmf_ws</code> folder. </p>
<h4 id="independent-installation"><a class="header" href="#independent-installation">Independent Installation <a name="independent_install"></a></a></h4>
<p>The beauty of Traffic Editor is that the generated <code>.world</code> files are able to be used in simulation even without RMF. So perhaps you would like to just test out how Traffic Editor is like - you can are able to do a separate installation by cloning the repository, installing the dependencies and building the packages. </p>
<pre><code class="language-bash"># making your workspace
mkdir -p ~/rmf_traffic_editor_ws/src
cd ~/rmf_traffic_editor_ws/src

# cloning the repo
git clone https://github.com/open-rmf/rmf_traffic_editor.git
# rmf_traffic_editors depends on rmf_utils for building
git clone https://github.com/open-rmf/rmf_utils.git 

# rmf_traffic_editor dependencies
sudo apt install python3-shapely python3-yaml python3-requests
source /opt/ros/galactic/setup.bash

cd ~/rmf_traffic_editor_ws
colcon build
</code></pre>
<h3 id="using-traffic-editor-gui"><a class="header" href="#using-traffic-editor-gui">Using Traffic Editor GUI <a name="GUI"></a></a></h3>
<p>Now that you have the relevant repositories installed, source your workspace and let's get started!</p>
<pre><code class="language-bash"># for full RMF installations
source ~/rmf_ws/install/setup.bash 
traffic-editor
</code></pre>
<p>or</p>
<pre><code class="language-bash"># for full independent installations
source ~/rmf_traffic_editor_ws/install/setup.bash
traffic-editor
</code></pre>
<h4 id="step-1-naming-your-building"><a class="header" href="#step-1-naming-your-building">Step 1: Naming your Building <a name="step1"></a></a></h4>
<p>To start, you'll first name your <code>building.yaml</code> file. In the video, I saved it under the <code>src</code> folder in my workspace, but you can save it wherever you want.</p>
<p>Traffic Editor supports Geographic Coordinates and Reference-Map Coordinates. This feature was created after our creation of <a href="https://github.com/TRL-RMF/trl/tree/main/trl_demos_maps/maps/trl">TRL</a>, hence we were using the older Reference-Map Coordinate System in the video. Moving forward, it is encouraged to use the Geographic Coordinate system to avoid conflict for multiple levels.</p>
<p><video src ="https://user-images.githubusercontent.com/54682777/181432387-9a185b30-a2cc-4340-b609-cf0fd3dd2170.mp4" 
controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-2-adding-floorplans"><a class="header" href="#step-2-adding-floorplans">Step 2: Adding Floorplans <a name="step2"></a></a></h4>
<p>In this step, we start building our level by adding a <code>png</code> file of our floorplan. To follow this example, you may use the same files used in the video found in <a href="https://github.com/TRL-RMF/trl/tree/main/trl_demos_maps/maps/trl">this repository</a>. For now, we're adding the floorplan of Level 2 of Tampines Regional Library (that's the lowest floor!).</p>
<p><video src ="https://user-images.githubusercontent.com/54682777/181432397-6f644985-1861-4897-9c21-75a5294dad14.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-3-adding-robot-generated-map"><a class="header" href="#step-3-adding-robot-generated-map">Step 3: Adding Robot Generated Map <a name="step3"></a></a></h4>
<p>Now even though we have a floorplan of the building, we may still be missing some real-life features that do not show up on the floorplan. Hence, we will be adding an additional layer - the Robot Generated Map. This will help reveal extra obstacles such as bookshelves and false walls.</p>
<p>This robot map was generated by CAATO2's 2D LIDARs which produced a <code>pgm</code> and <code>yaml</code> file. The <code>pgm</code> file was converted to <code>png</code> to import into RMF Traffic Editor.</p>
<p><video src ="https://user-images.githubusercontent.com/54682777/181432440-64dcf944-2ae2-49f5-a807-32c9a14908b6.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-4-map-alignment"><a class="header" href="#step-4-map-alignment">Step 4: Map Alignment  <a name="step4"></a></a></h4>
<p>Now that we have 2 maps, we need to align them. The robot_map (in red) as shown in the video, is terribly oversized and needs to be scaled down. We first attempt to manually align the 2 maps such that we're able to roughly identify key features of both maps.</p>
<p>Once done, we're able to &quot;add features&quot; on each of the layers. The idea behind this is that by identifying similar features on both layers, we'll be able to use these points to align the 2 layers automatically.</p>
<blockquote>
<p>❗️Make sure you select the layer before placing the feature. Notice how I place all the features on the robot_map layer before switching to the Floorplan layer and place the features for the Floorplan layer! You should have at least 3 pairs of features.</p>
</blockquote>
<p>Once you're done, you may then draw &quot;rubberbands&quot; to link up the similar features. Once you're done, you can &quot;Optimise Layer Transforms&quot; and you'll see the magic happen!</p>
<p>(p.s. thanks so much for making &amp; explaining this feature Morgan 😁 !)</p>
<p><video src ="https://user-images.githubusercontent.com/54682777/181432458-22c0275d-7a07-4269-854c-01beca9e0ae7.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-5-adding-walls--flooring"><a class="header" href="#step-5-adding-walls--flooring">Step 5: Adding Walls &amp; Flooring  <a name="step5"></a></a></h4>
<p>Let's start making our world! Use the blue line tool and trace the parts of the floorplan with walls. Once you're done, you can right-click to end your line.</p>
<blockquote>
<p>ℹ️ You are able to adjust the height of the walls under &quot;Properties&quot; on the bottom right when you select them</p>
</blockquote>
<p>After that, you may use the flooring tool by tracing the same vertexes you used to create the walls!</p>
<p><video src ="https://user-images.githubusercontent.com/54682777/181433109-383fa93e-9460-4eef-80db-a55d48f678f7.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-6-adding-interior-walls--doors"><a class="header" href="#step-6-adding-interior-walls--doors">Step 6: Adding Interior Walls &amp; Doors  <a name="step6"></a></a></h4>
<p>Buildings aren't just made of exterior walls! Don't forget to add in walls within the building.</p>
<p>When adding doors, don't forget to rename the door name for future reference. </p>
<blockquote>
<p>ℹ️ Use a naming convention to be tidy. At TRL, we named our doors <code>&lt;description&gt;&lt;number&gt;_&lt;floor&gt;_door</code> </p>
</blockquote>
<p>At TRL, there are mainly 2 types of doors: double_hinged and double_sliding. Play around with the other properties to get it to the orientation you need.</p>
<p>You can refer to the <a href="https://osrf.github.io/ros2multirobotbook/traffic-editor.html">Official Traffic Editor Documentation</a> for more info the types of doors available. </p>
<p><video src ="https://user-images.githubusercontent.com/54682777/181433130-e996e6fd-8194-420e-94b4-3aa943ecf2c4.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-7-adding-measurements"><a class="header" href="#step-7-adding-measurements">Step 7: Adding Measurements <a name="step7"></a></a></h4>
<p>So far during our creation of this world, we have yet to define the measurements for the floorplan. Hence, we can use the measurement tool to add to our file. Be sure to add multiple measurements to get an accurate scaling.</p>
<blockquote>
<p>Admittedly, this step should be done earlier but it's ok if it's done at this stage as well.</p>
</blockquote>
<p><video src ="https://user-images.githubusercontent.com/54682777/181433151-15ff6cb5-397d-4dd5-93e7-c8c6f3ad1e94.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-8-adding-robot-lanes"><a class="header" href="#step-8-adding-robot-lanes">Step 8: Adding Robot Lanes <a name="step8"></a></a></h4>
<p>This step is very important! You are now determining where the robot is able to traverse on. The video simply demonstrates how to add lanes and name certain waypoints.</p>
<blockquote>
<p>ℹ️ Load up <a href="https://github.com/TRL-RMF/trl/blob/main/trl_demos_maps/maps/trl/trl.building.yaml"><code>trl.building.yaml</code></a> to see how we did our robot lanes! </p>
</blockquote>
<p><video src ="https://user-images.githubusercontent.com/54682777/181433169-d7a65012-ddd4-417c-bf59-03eaa3504a03.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-9-robots-for-simulation"><a class="header" href="#step-9-robots-for-simulation">Step 9: Robots for Simulation <a name="step9"></a></a></h4>
<p>For this project, we tested much of RMF in simulation. Thus, this is technically an optional step for real-life robots.</p>
<p>In order to spawn a robot in simulation, we need to define the properties as shown in the video. You may find a better explanation on the <a href="https://osrf.github.io/ros2multirobotbook/traffic-editor.html">official documentation</a> but for our use-case, we followed closely to the examples in the <code>rmf_demos</code> <a href="https://github.com/open-rmf/rmf_demos/tree/main/rmf_demos_maps/maps/airport_terminal">repository</a>. </p>
<blockquote>
<p>❗️Make sure you take note of your spelling and capitalization in the <code>spawn_robot_name</code> and <code>spawn_robot_type</code> properties! They are quite specific so they are possible points of error.</p>
</blockquote>
<p><video src ="https://user-images.githubusercontent.com/54682777/181433289-ed4977bf-49f4-4b33-b2ff-9485edf9de0a.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-10-level-alignment"><a class="header" href="#step-10-level-alignment">Step 10: Level Alignment <a name="step10"></a></a></h4>
<p>Before long, you'll find yourself having multiple floors of different floorplans. The question then is, how do you align these different floors?</p>
<p>In the video, we use the Level Alignment Fiducial tool. </p>
<blockquote>
<p>ℹ️ Use features that are 100% aligned on every floor such as lift cabins and escalators!</p>
</blockquote>
<p>Similar to the other alignment tools, be sure to use more than 2 points to ensure accuracy.</p>
<p><video src ="https://user-images.githubusercontent.com/54682777/181433301-874614d8-48cd-4594-bb41-f3dca4cac0d2.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h4 id="step-11-add-lift"><a class="header" href="#step-11-add-lift">Step 11: Add Lift <a name="step11"></a></a></h4>
<p>Lastly, it's time for us to add the lifts.</p>
<p>After filling the details as shown in the video, align the lift cabin to the proper position on the map.</p>
<blockquote>
<p>❗️Make sure the lift cabin does not touch the walls of the building </p>
</blockquote>
<blockquote>
<p>❗️Be sure to add lift waypoints to enable the robot lanes to join between levels</p>
</blockquote>
<p><video src ="https://user-images.githubusercontent.com/54682777/181433312-4b246f1a-4fdd-4e23-9868-bbd56258f4c2.mp4" controls="controls" style="max-width: 730px;"></video></p>
<h3 id="tips-errors-and-mistakes"><a class="header" href="#tips-errors-and-mistakes">Tips, Errors and Mistakes <a name="oops"></a></a></h3>
<p>❗️Always always always SAVE your work! (ctrl-s)</p>
<p>If Traffic Editor crashes, or if you close the terminal running traffic-editor without saving, your hard work will be lost! 😭</p>
<p>❗️Read the <code>building.yaml</code> file!</p>
<p>Also, note that Traffic Editor is after all simply a GUI. All your changes are actually added to the <code>building.yaml</code> file. Take a look at it and try to understand it's structure. At times, this will allow you to make more precise changes faster instead of relying heavily on the GUI!</p>
<p><img src="content/../images/building_yaml.gif" alt="building_yaml" /></p>
<h2 id="mapping--traffic-editor-concerns"><a class="header" href="#mapping--traffic-editor-concerns">Mapping &amp; Traffic Editor Concerns</a></h2>
<p>Traffic Editor is not perfect and can be buggy at times. The key is not to rely on the GUI but to understand the <code>building.yaml</code> file deeply and reading up the official documentation.</p>
<h2 id="interoperability-considerations-across-multiple-fleets"><a class="header" href="#interoperability-considerations-across-multiple-fleets">Interoperability considerations (across multiple fleets)</a></h2>
<p>It is vital to create the world with precision. The system integrator but recognize that not just a single type of robot will be relying on this RMF traffic plan. Robots come in different shapes and sizes and may navigate very differently, hence all these must be taken into consideration when creating the traffic plan.</p>
<blockquote>
<p>e.g. the robot lanes must be decided with all stakeholders to make sure that the robot will not perform unexpected behaviors such as entering restricted areas</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="emergency-requirements--behaviors"><a class="header" href="#emergency-requirements--behaviors">Emergency Requirements &amp; Behaviors</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="safety-instrumented-system-sis"><a class="header" href="#safety-instrumented-system-sis">Safety Instrumented System (SIS)</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="wireless-charger"><a class="header" href="#wireless-charger">Wireless Charger</a></h1>
<h2 id="recommended-integration-to-amr"><a class="header" href="#recommended-integration-to-amr">Recommended integration to AMR</a></h2>
<h3 id="mechanical-placement-considerations-eddy-currents-31cm-from-ground"><a class="header" href="#mechanical-placement-considerations-eddy-currents-31cm-from-ground">Mechanical placement considerations (Eddy currents, ~31cm from ground)</a></h3>
<h3 id="electrical--electronic"><a class="header" href="#electrical--electronic">Electrical &amp; Electronic</a></h3>
<h3 id="software"><a class="header" href="#software">Software</a></h3>
<h3 id="functional-check"><a class="header" href="#functional-check">Functional Check</a></h3>
<h2 id="docking-approaches-fiducial-markers-lidar-reflective-markers"><a class="header" href="#docking-approaches-fiducial-markers-lidar-reflective-markers">Docking approaches (fiducial markers, lidar, reflective markers)</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ethernet-wiring-diagram-at-trl"><a class="header" href="#ethernet-wiring-diagram-at-trl">Ethernet wiring diagram at TRL</a></h1>
<p><img src="content/../images/wiring.png" alt="Ethernet wiring diagram at TRL" /></p>
<h2 id="wiring-requiurements"><a class="header" href="#wiring-requiurements">Wiring Requiurements</a></h2>
<ul>
<li>Lvl B1 – x1 Eth Port (no auto doors, 1 for spare)</li>
<li>Lvl 2-5 – x2 Eth Port each (1 for door, 1 for spare)</li>
<li>Lvl 6 – x4 Eth Port (1 for door, 1 for spare) </li>
<li>(Lift PLC to have x2 lan cables for redundancy)</li>
</ul>
<p>Wireless charger to deploy at level 4 and 6</p>
<h3 id="level-6"><a class="header" href="#level-6">Level 6</a></h3>
<p><img src="content/../images/l6.png" alt="Level 6" /></p>
<h3 id="level-4"><a class="header" href="#level-4">Level 4</a></h3>
<p><img src="content/../images/l4.png" alt="Level 4" /></p>
<h3 id="trunking-switch-to-server-room"><a class="header" href="#trunking-switch-to-server-room">Trunking switch to Server room</a></h3>
<p><img src="content/../images/trunking.png" alt="Trunking switch to Server room" /></p>
<h3 id="server-room"><a class="header" href="#server-room">Server room</a></h3>
<p><img src="content/../images/server.png" alt="Server room" /></p>
<h2 id="download-link"><a class="header" href="#download-link">Download link</a></h2>
<p>Click the link to download the Ethernet Wiring Diagram.
<a href="content/../download/Wiring.pptx">Download</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="parasoft-setup-of-rmf"><a class="header" href="#parasoft-setup-of-rmf">Parasoft Setup (of RMF)</a></h1>
<p>In this section, we will go through an example of configuring the <a href="https://github.com/open-rmf/rmf_utils">rmf_utils</a> package to be suitable
for running Parasoft tests on it.</p>
<h2 id="setting-up-parasoft"><a class="header" href="#setting-up-parasoft">Setting Up Parasoft</a></h2>
<p>As our current license is only supported on one local machine, the Machine ID has to be fixed to a
non-floating one each time a new Parasoft session is being started.
Fix the machine ID with the following command:</p>
<blockquote>
<p>export PARASOFT_SUPPORT_NET_INTERFACES=enp5s0</p>
</blockquote>
<p>Now that the Machine ID is a non-floating one, we can now run the Parasoft software with:</p>
<blockquote>
<p>&lt;PARASOFT_INSTALL_DIR&gt;/cpptest</p>
</blockquote>
<h2 id="configuring-rmf_utils-project"><a class="header" href="#configuring-rmf_utils-project">Configuring rmf_utils Project</a></h2>
<p>To import existing projects on Parasoft to run testings, we need to perform the following actions:</p>
<ul>
<li>Add the Parasoft cmake folder into rmf_utils project structure</li>
<li>Add configuration lines into the main CMakeList.txt</li>
<li>Build the rmf_utils project</li>
</ul>
<h2 id="add-parasoft-cmake-folder"><a class="header" href="#add-parasoft-cmake-folder">Add Parasoft Cmake Folder</a></h2>
<p>From /$PARASOFT_INSTALL_DIR/integration/cmake directory, copy the entire Parasoft cmake
folder into rmf_utils project structure.</p>
<p><img src="content/../images/parasoft.1.png" alt="Parasoft1" /></p>
<p>This cmake folder consists of &quot;cpptest.templates&quot;, &quot;cpptest-coverage.cmake&quot; and &quot;cpptestproject.cmake&quot;.</p>
<p><img src="content/../images/parasoft.2.png" alt="Parasoft2" /></p>
<p>The entire Parasoft cmake folder is now added into rmf_utils project structure.</p>
<p><img src="content/../images/parasoft.3.png" alt="Parasoft3" /></p>
<h2 id="add-configuration-lines-into-main-cmakelisttxt"><a class="header" href="#add-configuration-lines-into-main-cmakelisttxt">Add Configuration Lines into Main CMakeList.txt:</a></h2>
<p>To enable the cmake folder with Parasoft C/C++test related extension functions, we need to add the
following line:</p>
<blockquote>
<p>include(cmake/cpptest-project.cmake)</p>
</blockquote>
<p>We will need to define a target to represent the C/C++test project for rmf_utils, by adding<br />
cpptest_add_executable() function and other required build options and dependencies:</p>
<pre><code>cpptest_add_executable(
rmf_utils_testing              # name of C/C++test project name (to be modified)
CPPTEST_COMPILER_ID gcc_9-64   # compiler name
TARGETS mf_utils               # target name (to be modified)
)

# link C/C++test project name to target name
target_link_libraries(rmf_utils_testing PRIVATE rmf_utils)		
</code></pre>
<h2 id="build-rmf_utils-project"><a class="header" href="#build-rmf_utils-project">Build rmf_utils Project:</a></h2>
<p>Now that the target is defined with build options and dependencies, we can now configure and build
to generate C/C++test project configuration files for rmf_utils. This allows us to import rmf_utils as
an Eclipse project in Parasoft. This is done by the following commands:</p>
<pre><code>cd &lt;RMF_UTILS_DIRECTORY&gt;
mkdir build
cd build
cmake -DCPPTEST_PROJECT=ON ..
make
</code></pre>
<h2 id="importing-rmf_utils-projects"><a class="header" href="#importing-rmf_utils-projects">Importing rmf_utils Projects</a></h2>
<p>After configuring the project, we can now proceed to import it into Parasoft. On the Parasoft
window, navigate to the following tab:</p>
<blockquote>
<p>File &gt; Import &gt; General &gt; Existing Projects into Workspace</p>
</blockquote>
<p>Select &quot;root directory&quot; to be the main folder, and browse for the rmf_utils project.
Under Options subcategory, select &quot;search for nested projects&quot; checkbox. A list of C/C++test
project names would be listed according to the rmf_utils project.
Select the corresponding C/C++test project name, rmf_utils_testing in this tutorial, configured in
the cpptest_add_executable() previously.
Lastly, click Finish to import rmf_utils project.</p>
<p><img src="content/../images/parasoft.4.png" alt="Parasoft4" /></p>
<h2 id="running-the-parasoft-test"><a class="header" href="#running-the-parasoft-test">Running the Parasoft Test</a></h2>
<p>Now that we have imported rmf_utils successfully into Parasoft, we can now run tests according to
our preferred rules and standards.
Select the imported project, rmf_utils_testing, on the left panel. Click on the blue Run Tests button
to test the project using the default &quot;Recommended Rules&quot; standard.</p>
<p><img src="content/../images/parasoft.5.png" alt="Parasoft5" /></p>
<p>We can choose other standards to run the test, by clicking on the arrow beside the blue Run Tests button.
Customization can be done as well by navigating to the following tab:</p>
<blockquote>
<p>Parasoft &gt; Test Configurations</p>
</blockquote>
<p>Select the desired rule category &gt; Static.
Select or deselect rules to customize.
Click Apply to save changes.</p>
<p><img src="content/../images/parasoft.6.png" alt="Parasoft6" /></p>
<p>The sample html parasoft report pf the <a href="https://github.com/open-rmf/rmf_utils">rmf_utils</a> package can be accessed 
in the <a href="content/./parasoft-outputs.html">Parasoft Outputs</a> section of this handbook</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="parasoft-outputs-of-rmf-modules"><a class="header" href="#parasoft-outputs-of-rmf-modules">Parasoft Outputs (of RMF Modules)</a></h1>
<p>The modules reports here are culled from the <a href="https://github.com/osrf/rmf_core">rmf_core</a> repositories.
Current outputs are the static test reports from our commercial QA tool of choice (Parasoft). 
Unit testing and code coverage reports to follow in the coming months</p>
<p>See <a href="content/./software-qa.html">Approach to Software Quality Assurance</a><br />
As a guideline, modules that are intended for in operational runtime, should be written in</p>
<ul>
<li>C/C++ and </li>
<li>Subject to the static, unit and code coverage tests, for hygeine purposes</li>
</ul>
<h1 id="mandatory-screened-1st-july-2022"><a class="header" href="#mandatory-screened-1st-july-2022">Mandatory Screened (1st July 2022)</a></h1>
<h2 id="rmf-task"><a class="header" href="#rmf-task"><a href="https://github.com/open-rmf/rmf_task">RMF Task</a></a></h2>
<p><a href="content/../parasoft_reports/rmf_task_testing/rmf_task_testing_detailedRreport.html">rmf_task_testing_detailedRreport.html</a><br />
<a href="content/../parasoft_reports/rmf_task_testing/rmf_task_testing_summaryRreport.html">rmf_task_testing_summaryRreport.html</a></p>
<h2 id="rmf-task-ros2"><a class="header" href="#rmf-task-ros2">RMF Task ROS2</a></h2>
<p><a href="content/../parasoft_reports/rmf_task_ros2_testing/rmf_task_ros2_testing_detailedReport.html">rmf_task_ros2_testing_detailedReport.html</a><br />
<a href="content/../parasoft_reports/rmf_task_ros2_testing/rmf_task_ros2_testing_summaryReport.html">rmf_task_ros2_testing_summaryReport.html</a></p>
<h2 id="rmf-traffic"><a class="header" href="#rmf-traffic"><a href="https://github.com/open-rmf/rmf_traffic">RMF Traffic</a></a></h2>
<p><a href="content/../parasoft_reports/rmf_traffic_testing/rmf_traffic_testing_detailedRreport.html">rmf_traffic_testing_detailedRreport.html</a><br />
<a href="content/../parasoft_reports/rmf_traffic_testing/rmf_traffic_testing_summaryRreport.html">rmf_traffic_testing_summaryRreport.html</a></p>
<h2 id="rmf-utils"><a class="header" href="#rmf-utils"><a href="https://github.com/open-rmf/rmf_utils">RMF Utils</a></a></h2>
<p><a href="content/../parasoft_reports/rmf_utils_testing/rmf_utils_testing_detailedRreport.html">rmf_utils_testing_detailedRreport.html</a><br />
<a href="content/../parasoft_reports/rmf_utils_testing/rmf_utils_testing_summaryRreport.html">rmf_utils_testing_summaryRreport.html</a> </p>
<h2 id="rmf-fleet-adapter"><a class="header" href="#rmf-fleet-adapter">RMF Fleet Adapter</a></h2>
<p><a href="content/../parasoft_reports/rmf_fleet_adapter_testing/rmf_fleet_adapter_testing_detailedReport.html">rmf_fleet_adapter_testing_detailedReport.html</a><br />
<a href="content/../parasoft_reports/rmf_fleet_adapter_testing/rmf_fleet_adapter_testing_summaryReport.html">rmf_fleet_adapter_testing_summaryReport.html</a> </p>
<p><br> <br> <br></p>
<h1 id="optionally-screened-modules-1st-july-2022"><a class="header" href="#optionally-screened-modules-1st-july-2022">Optionally Screened Modules (1st July 2022)</a></h1>
<h2 id="rmf-battery"><a class="header" href="#rmf-battery">RMF <a href="https://github.com/open-rmf/rmf_battery">Battery</a></a></h2>
<p><a href="content/../parasoft_reports/rmf_battery_testing/rmf_battery_testing_detailedReport.html">rmf_battery_testing_detailedReport.html</a><br />
<a href="content/../parasoft_reports/rmf_battery_testing/rmf_battery_testing_summaryReport.html">rmf_battery_testing_summaryReport.html</a></p>
<h2 id="rmf-building-sim-utils"><a class="header" href="#rmf-building-sim-utils">RMF Building Sim Utils</a></h2>
<p><a href="content/../parasoft_reports/rmf_building_sim_utils_testing/rmf_building_sim_utils_testing_detailedReport.html">rmf_building_sim_utils_testing_detailedReport.html</a><br />
<a href="content/../parasoft_reports/rmf_building_sim_utils_testing/rmf_building_sim_utils_testing_summaryReport.html">rmf_building_sim_utils_testing_summaryReport.html</a></p>
<h2 id="rmf-robot-sim-utils"><a class="header" href="#rmf-robot-sim-utils">RMF Robot Sim Utils</a></h2>
<p><a href="content/../parasoft_reports/rmf_robot_sim_utils_testing/rmf_robot_sim_utils_testing_detailedReport.html">rmf_robot_sim_utils_testing_detailedReport.html</a><br />
<a href="content/../parasoft_reports/rmf_robot_sim_utils_testing/rmf_robot_sim_utils_testing_summaryReport.html">rmf_robot_sim_utils_testing_summaryReport.html</a></p>
<h2 id="rmf-visualization-rviz2-plugins"><a class="header" href="#rmf-visualization-rviz2-plugins">RMF Visualization Rviz2 Plugins</a></h2>
<p><a href="content/../parasoft_reports/rmf_visualization_rviz2_plugins_testing/rmf_visualization_rviz2_plugins_testing_detailedReport.html">rmf_visualization_rviz2_plugins_testing_detailedReport.html</a><br />
<a href="content/../parasoft_reports/rmf_visualization_rviz2_plugins_testing/rmf_visualization_rviz2_plugins_testing_summaryReport.html">rmf_visualization_rviz2_plugins_testing_summaryReport.html</a></p>
<h2 id="rmf-visualization-schedule"><a class="header" href="#rmf-visualization-schedule">RMF Visualization Schedule</a></h2>
<p><a href="content/../parasoft_reports/rmf_visualization_schedule_testing/rmf_visualization_schedule_testing_detailedReport.html">rmf_visualization_schedule_testing_detailedReport.html</a><br />
<a href="content/../parasoft_reports/rmf_visualization_schedule_testing/rmf_visualization_schedule_testing_summaryReport.html">rmf_visualization_schedule_testing_summaryReport.html</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="faq"><a class="header" href="#faq">FAQ</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
